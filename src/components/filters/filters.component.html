<div 
  class="absolute inset-0 z-20 bg-white dark:bg-slate-700 flex flex-col"
  [class.animate-slide-down]="!isClosing()"
  [class.animate-slide-up]="isClosing()">
  <header class="p-4 flex items-center justify-between border-b border-gray-200 dark:border-slate-600 shrink-0">
    <h2 class="text-xl font-bold">Filtros</h2>
    <button (click)="closePanel()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-600">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </header>

  <div class="flex-grow p-6 overflow-y-auto space-y-6">
    <!-- Breed Filter -->
    <div>
      <label for="breed" class="block text-sm font-medium text-gray-600 dark:text-gray-300">Raza</label>
      <select id="breed" [value]="localFilters().breed" (change)="onBreedChange($event)" class="mt-1 w-full px-4 py-2 border border-gray-300 dark:border-slate-500 rounded-lg focus:ring-rose-500 focus:border-rose-500 dark:bg-slate-600">
        <option value="all">Todas las razas</option>
        @for (breed of breeds(); track breed) {
          <option [value]="breed">{{ breed }}</option>
        }
      </select>
    </div>

    <!-- Age Filter -->
    <div>
      <label class="block text-sm font-medium text-gray-600 dark:text-gray-300">Rango de Edad</label>
      <div class="mt-1 flex items-center space-x-4">
        <div class="flex-1">
          <label for="min-age" class="text-xs text-gray-500 dark:text-gray-400">Mín.</label>
          <input type="number" id="min-age" min="0" max="15" [value]="localFilters().ageRange.min" (input)="onAgeChange('min', $event)" class="w-full px-3 py-2 border border-gray-300 dark:border-slate-500 rounded-lg focus:ring-rose-500 focus:border-rose-500 dark:bg-slate-600">
        </div>
        <div class="flex-1">
          <label for="max-age" class="text-xs text-gray-500 dark:text-gray-400">Máx.</label>
          <input type="number" id="max-age" min="0" max="15" [value]="localFilters().ageRange.max" (input)="onAgeChange('max', $event)" class="w-full px-3 py-2 border border-gray-300 dark:border-slate-500 rounded-lg focus:ring-rose-500 focus:border-rose-500 dark:bg-slate-600">
        </div>
      </div>
    </div>

    <!-- Size Filter -->
    <div>
      <label class="block text-sm font-medium text-gray-600 dark:text-gray-300">Tamaño</label>
      <div class="mt-2 grid grid-cols-3 gap-2">
        @for(size of availableSizes; track size) {
          <div>
            <input type="checkbox" [id]="'size-' + size" [checked]="isSizeSelected(size)" (change)="onSizeChange(size, $event)" class="hidden peer">
            <label [for]="'size-' + size" class="block w-full text-center p-2 border rounded-lg cursor-pointer text-sm font-semibold peer-checked:bg-rose-500 peer-checked:text-white peer-checked:border-rose-500 border-gray-300 dark:border-slate-500 hover:bg-gray-50 dark:hover:bg-slate-600/50 transition-colors">
              {{ size }}
            </label>
          </div>
        }
      </div>
    </div>
  </div>

  <footer class="p-4 flex items-center space-x-4 border-t border-gray-200 dark:border-slate-600 shrink-0">
    <button (click)="resetFilters()" class="w-full px-4 py-2 bg-gray-200 dark:bg-slate-600 text-gray-700 dark:text-gray-200 font-semibold rounded-full hover:bg-gray-300 dark:hover:bg-slate-500 transition-colors">
      Limpiar
    </button>
    <button (click)="applyFilters()" class="w-full px-4 py-2 bg-rose-500 text-white font-semibold rounded-full hover:bg-rose-600 transition-colors shadow-md hover:shadow-lg">
      Aplicar
    </button>
  </footer>
</div>